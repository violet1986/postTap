#!/usr/bin/env stap

function parse_estate:string (estate:long) {
    return sprintf("estate:%p,es_processed:%p", estate, user_long(estate+184)) 
}


probe process("/usr/local/pgsql/bin/postgres").function("ExecProcNode").call
{
    lpid = pid()
    node = long_arg(1)
    estate = user_long(node+16)
    printdln("|", lpid, "ExecProcNode", pointer_arg(1), parse_estate(estate))
}

