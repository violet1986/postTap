#!/usr/bin/env stap
function parse_planstate:string (planstate:long) {
    return sprintf("type:%d,plan:%ld,left:%ld,right:%ld", kernel_int(planstate), kernel_long(planstate+8), kernel_long(planstate+56),kernel_long(planstate+64)) 
}
probe process("/usr/local/pgsql/bin/postgres").function("ExplainNode").call   
{
    plan_state = long_arg(1)
# print_ubacktrace()
    printdln("|", pid(), ppfunc(), parse_planstate(plan_state))
}


